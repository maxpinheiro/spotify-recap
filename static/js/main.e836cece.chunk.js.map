{"version":3,"sources":["services/SpotifyService.js","components/Home.js","components/RecapInfo.js","components/Recapper.js","components/SpotifyCallback.js","components/FallbackHandler.js","index.js"],"names":["spotify_client_id","spotify_client_secret","spotify_redirect_uri","jsonToUrlEncoded","obj","Object","keys","map","key","encodeURIComponent","join","auth_code","a","local","encoded","grant_type","code","redirect_uri","fetch","method","headers","Authorization","window","btoa","body","then","res","json","data","Promise","resolve","reject","hasOwnProperty","success","accessToken","access_token","refreshToken","refresh_token","expiresIn","expires_in","errorMessage","error_description","catch","e","console","log","type","timespan","items","status","playing","item","song","name","artist","artists","spotifyId","id","albumArtUrl","album","images","url","audioFeatures","danceability","energy","loudness","mode","speechiness","acousticness","instrumentalness","liveness","valence","tempo","duration_ms","time_signature","beats","query","tracks","songs","track","spotifyUri","uri","imageUrl","message","spotifyService","getTokens","refreshTokens","getTopItems","getCurrentTrack","getAudioFeatures","getAudioAnalysis","searchSongs","pausePlayback","skipPlayback","addToQueue","state","length","text","possible","i","charAt","Math","floor","random","generateRandomString","LoadingMessage","color","textColor","width","height","className","Home","useState","spotifyCallback","setSpotifyCallback","useEffect","location","pathname","includes","hostname","to","search","style","href","RecapInfo","idx","external_urls","spotify","queryString","require","initialState","undefined","startTimeMs","RecapContainer","props","refreshPlayer","bind","parse","this","setState","prevState","Date","now","prevProps","snapshot","document","backdropFilter","backgroundImage","classList","add","timeSinceStart","timeLeft","ceil","spotifyRefreshToken","spotifyAccessToken","spotifyExpiresIn","history","push","findCurrentSong","React","Component","SpotifyCallback","error","setTimeout","spotifyCode","FallbackHandler","hash","ReactDOM","render","StrictMode","exact","path","component","getElementById"],"mappings":"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","file":"static/js/main.e836cece.chunk.js","sourcesContent":["// spotify dashboard: maxpinheiro181, Poi1poi1$$\nexport const spotify_client_id = \"ae520a706c27417f8b6b44bc41c224d0\";\nexport const spotify_client_secret = \"2fecacd1974f4b9aacc3bafb76e8aeda\";\nexport const spotify_redirect_uri = \"http://maxpinheiro.github.io/spotify-recap/%23/spotifycallback\";\nexport const local_spotify_redirect_uri = \"http://localhost:3000/spotifycallback\";\n\nexport const generateRandomString = (length) => {\n    let text = '';\n    const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    for (let i = 0; i < length; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n}\n\nexport const jsonToUrlEncoded = (obj) => Object.keys(obj).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(obj[key])).join('&');\n\n/*\n* Response object:\n* success (200 status in header):\n*  {\n   \"access_token\": \"NgCXRK...MzYjw\",\n   \"token_type\": \"Bearer\",\n   \"scope\": \"user-read-private user-read-email\",\n   \"expires_in\": 3600,\n   \"refresh_token\": \"NgAagA...Um_SHo\"\n}\n* error (400 status in header):\n*   {\n*   \"error\": \"invalid_grant\",\n*   \"error_description\": \"Invalid authorization code\"\n*   }\n*/\nexport async function getTokens(auth_code, local = true) {\n    const body = {\n        grant_type: \"authorization_code\",\n        code: auth_code,\n        redirect_uri: local ? local_spotify_redirect_uri : spotify_redirect_uri\n    };\n    const encoded = jsonToUrlEncoded(body);\n\n    return fetch('https://accounts.spotify.com/api/token', {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": 'application/x-www-form-urlencoded',\n            Authorization: 'Basic ' + window.btoa(`${spotify_client_id}:${spotify_client_secret}`)\n        },\n        body: encoded\n    }).then(res =>  res.json().then(data => {\n        return new Promise((resolve, reject) => {\n            if (data.hasOwnProperty(\"access_token\") && data.hasOwnProperty(\"refresh_token\") && data.hasOwnProperty(\"expires_in\")) {\n                resolve({success: true, accessToken: data.access_token, refreshToken: data.refresh_token, expiresIn: data.expires_in});\n            } else if (data.hasOwnProperty(\"error\") && data.hasOwnProperty(\"error_description\")) {\n                resolve({success: false, errorMessage: data.error_description});\n            } else {\n                resolve({success: false, errorMessage: \"unknown error\"});\n            }\n        })\n    })).catch(e => {console.log(\"TOKEN ERROR: \", e); return e.json()})\n}\n\n/*\n* Response object:\n* success (200 status in header):\n*  {\n   \"access_token\": \"NgCXRK...MzYjw\",\n   \"token_type\": \"Bearer\",\n   \"scope\": \"user-read-private user-read-email\",\n   \"expires_in\": 3600\n}\n*\n*/\nexport async function refreshTokens(refresh_token) {\n    const body = {\n        grant_type: \"refresh_token\",\n        refresh_token\n    };\n    const encoded = jsonToUrlEncoded(body);\n\n    return fetch('https://accounts.spotify.com/api/token', {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": 'application/x-www-form-urlencoded',\n            Authorization: 'Basic ' + window.btoa(`${spotify_client_id}:${spotify_client_secret}`)\n        },\n        body: encoded\n    }).then(res =>  res.json().then(data => {\n        return new Promise(resolve => {\n            if (data.hasOwnProperty(\"access_token\") && data.hasOwnProperty(\"expires_in\")) {\n                resolve({success: true, accessToken: data.access_token, expiresIn: data.expires_in});\n            } else if (data.hasOwnProperty(\"error\") && data.hasOwnProperty(\"error_description\")) {\n                resolve({success: false, errorMessage: data.error_description});\n            } else {\n                resolve({success: false, errorMessage: \"unknown error\"});\n            }\n        })\n    })).catch(e => e.json())\n}\n\nexport async function getTopItems(access_token, type=\"artists\", timespan=\"medium_term\") {\n    return fetch(`https://api.spotify.com/v1/me/top/${type}?time_range=${timespan}`, {\n        headers: {\n            \"Content-Type\": 'application/json',\n            Authorization: `Bearer ${access_token}`\n        }\n    }).then(res => res.json().then(data => {\n        return new Promise(resolve => {\n            if (data.hasOwnProperty(\"items\")) {\n                resolve({success: true, items: data.items});\n            } else {\n                resolve({success: false});\n            }\n        })\n    }))\n}\n\nexport async function getCurrentTrack(access_token) {\n    return fetch('https://api.spotify.com/v1/me/player/currently-playing', {\n        headers: {\n            \"Content-Type\": 'application/json',\n            Authorization: `Bearer ${access_token}`\n        }\n    }).then(res => {\n        if (res.status === 204) {\n            return new Promise(resolve => resolve({success: false, playing: false}))\n        } else {\n            return res.json().then(data => {\n                return new Promise(resolve => {\n                    if (data.hasOwnProperty(\"item\") && data.item.hasOwnProperty(\"name\") && data.item.hasOwnProperty(\"artists\")) {\n                        const song = data.item.name;\n                        const artist = data.item.artists[0].name;\n                        const spotifyId = data.item.id;\n                        const albumArtUrl = data.item.album.images[0].url;\n                        resolve({success: true, song, artist, spotifyId, albumArtUrl});\n                    } else {\n                        resolve({success: false, errorMessage: \"unknown error\"});\n                    }\n                })\n            })\n        }\n    })\n}\n\nexport async function getAudioFeatures(spotifyId, access_token) {\n    return fetch(`https://api.spotify.com/v1/audio-features/${spotifyId}`, {\n        headers: {\n            \"Content-Type\": 'application/json',\n            Authorization: `Bearer ${access_token}`\n        }\n    }).then(res => res.json().then(data => {\n        return new Promise(resolve => {\n            if (data.hasOwnProperty(\"danceability\")) {\n                resolve({success: true, audioFeatures: {\n                        danceability: data.danceability,\n                        energy: data.energy,\n                        key: data.key,\n                        loudness: data.loudness,\n                        mode:  data.mode,\n                        speechiness: data.speechiness,\n                        acousticness: data.acousticness,\n                        instrumentalness: data.instrumentalness,\n                        liveness: data.liveness,\n                        valence: data.valence,\n                        tempo: data.tempo,\n                        type: data.type,\n                        duration_ms: data.duration_ms,\n                        time_signature: data.time_signature\n                    }})\n            } else {\n                resolve({success: false});\n            }\n        })\n    }))\n}\n\nexport async function getAudioAnalysis(spotifyId, access_token) {\n    return fetch(`https://api.spotify.com/v1/audio-features/${spotifyId}`, {\n        headers: {\n            \"Content-Type\": 'application/json',\n            Authorization: `Bearer ${access_token}`\n        }\n    }).then(res => res.json().then(data => {\n        return new Promise(resolve => {\n            if (data.hasOwnProperty(\"beats\")) {\n                resolve({success: true, beats: data.beats});\n            } else {\n                resolve({success: false});\n            }\n        })\n    }))\n}\n\nexport async function searchSongs(query, access_token) {\n    return fetch(`https://api.spotify.com/v1/search?q=${query}&type=track&limit=10`, {\n        headers: {\n            \"Content-Type\": 'application/json',\n            Authorization: `Bearer ${access_token}`\n        }\n    }).then(res => res.json().then(data => {\n        return new Promise(resolve => {\n            if (data.hasOwnProperty(\"tracks\")) {\n                const tracks = data.tracks.items;\n                const concatArtists = (artists) => (artists.join(', '));\n                const songs = tracks.map(track => ({name: track.name, artist: concatArtists(track.artists.map(a => a.name)), spotifyId: track.id, spotifyUri: track.uri, imageUrl: track.album.images[0].url}));\n                resolve({success: true, songs});\n            } else if (data.hasOwnProperty(\"error\")) {\n                resolve({success: false, errorMessage: data.message});\n            } else {\n                resolve({success: false, errorMessage: \"unknown error\"});\n            }\n        })\n    }))\n}\n\nexport async function startPlayback(access_token) {\n    return fetch('https://api.spotify.com/v1/me/player/play', {\n        method: 'PUT',\n        headers: {\n            \"Content-Type\": 'application/json',\n            Authorization: `Bearer ${access_token}`\n        }\n    }).then(res => {\n        if (res.status === 204) {\n            return new Promise(resolve => resolve({success: true}));\n        } else if (res.status === 404) {\n            return new Promise(resolve => resolve({success: false, message: \"no device found\"}));\n        } else if (res.status === 403) {\n            return new Promise(resolve => resolve({success: false, message: \"user making request is non-premium\"}));\n        } else {\n            return new Promise(resolve => resolve({success: false, message: \"unknown error\"}));\n        }\n    })\n}\n\nexport async function pausePlayback(access_token) {\n    return fetch('https://api.spotify.com/v1/me/player/pause', {\n        method: 'PUT',\n        headers: {\n            \"Content-Type\": 'application/json',\n            Authorization: `Bearer ${access_token}`\n        }\n    }).then(res => {\n        if (res.status === 204) {\n            return new Promise(resolve => resolve({success: true}));\n        } else if (res.status === 404) {\n            return new Promise(resolve => resolve({success: false, message: \"no device found\"}));\n        } else if (res.status === 403) {\n            return new Promise(resolve => resolve({success: false, message: \"user making request is non-premium\"}));\n        } else {\n            return new Promise(resolve => resolve({success: false, message: \"unknown error\"}));\n        }\n    })\n}\n\nexport async function skipPlayback(access_token) {\n    return fetch('https://api.spotify.com/v1/me/player/next', {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": 'application/json',\n            Authorization: `Bearer ${access_token}`\n        }\n    }).then(res => {\n        if (res.status === 204) {\n            return new Promise(resolve => resolve({success: true}));\n        } else if (res.status === 404) {\n            return new Promise(resolve => resolve({success: false, message: \"no device found\"}));\n        } else if (res.status === 403) {\n            return new Promise(resolve => resolve({success: false, message: \"user making request is non-premium\"}));\n        } else {\n            return new Promise(resolve => resolve({success: false, message: \"unknown error\"}));\n        }\n    })\n}\n\nexport async function addToQueue(spotifyUri, access_token) {\n    return fetch(`https://api.spotify.com/v1/me/player/queue?uri=${spotifyUri}`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": 'application/json',\n            Authorization: `Bearer ${access_token}`\n        }\n    }).then(res => {\n        if (res.status === 204) {\n            return new Promise(resolve => resolve({success: true}));\n        } else if (res.status === 404) {\n            return new Promise(resolve => resolve({success: false, message: \"no device found\"}));\n        } else if (res.status === 403) {\n            return new Promise(resolve => resolve({success: false, message: \"user making request is non-premium\"}));\n        } else {\n            return new Promise(resolve => resolve({success: false, message: \"unknown error\"}));\n        }\n    })\n}\n\nconst spotifyService = {getTokens, refreshTokens, getTopItems, getCurrentTrack, getAudioFeatures, getAudioAnalysis, searchSongs, pausePlayback, skipPlayback, addToQueue};\nexport default spotifyService;\n","import React, {useEffect, useState} from 'react';\nimport {generateRandomString, spotify_client_id, spotify_redirect_uri, local_spotify_redirect_uri} from '../services/SpotifyService';\nimport Loader from \"react-loader-spinner\";\nimport {Redirect} from \"react-router-dom\";\n\nconst scope = 'user-top-read user-read-private user-read-currently-playing user-read-email';\nconst developing = true;\nconst state = generateRandomString(10);\n\nexport const LoadingMessage = (message, color = \"#15d61c\", textColor = \"text-black\", width = 80, height = 80) => (\n    <div>\n        <p className={`mb-3 ${textColor}`}>{message}</p>\n        <div className=\"flex\">\n            <Loader className=\"mx-auto\" type=\"Oval\" color={color} height={height} width={width}/>\n        </div>\n    </div>\n)\n\nconst Home = () => {\n    const [spotifyCallback, setSpotifyCallback] = useState(false);\n    useEffect(() => {\n        if (window.location.pathname.includes('spotifycallback')) {\n            setSpotifyCallback(true);\n        }\n    }, [])\n\n    const local = window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\" || window.location.hostname === \"\";\n    console.log(`Mode: ${local ? 'development' : 'production'}`);\n    if (spotifyCallback) {\n        return <Redirect to={`/spotify-lyrics#/spotifycallback${window.location.search}`} />;\n    } else {\n        return (\n            <div className=\"container mx-auto\">\n                <div style={{height: \"25vh\"}} />\n                <p className=\"text-4xl font-semibold text-josephin my-4 text-center text-spotify-green\">Spotify Recap</p>\n                <div className=\"py-5\" />\n                <div className=\"flex\">\n                    <a href={`https://accounts.spotify.com/authorize?client_id=${spotify_client_id}&response_type=code&redirect_uri=${local ? local_spotify_redirect_uri : spotify_redirect_uri}&state=${state}&scope=${scope}&show_dialog=${developing}`}\n                       className=\"rounded-lg p-4 bg-spotify-green text-xl text-josephin text-white mx-auto\">\n                        Login through Spotify\n                    </a>\n                </div>\n                <div style={{height: \"50vh\"}} />\n            </div>\n        )\n    }\n\n}\n\nexport default Home;\n","import React from \"react\";\n\nconst RecapInfo = ({items, type}) => {\n    return (\n        <div className=\"flex flex-col text-josefin\">\n            <p className=\"text-white text-2xl\">top {type}</p>\n            <div className=\"border-b border-white w-1/6 mb-3 mt-1 mx-auto\"/>\n            {\n                type === \"artists\" && items.map((artist, idx) => (\n                    <div key={idx}>\n                        <a href={artist.external_urls?.spotify || \"\"} className=\"text-white\">{artist.name}</a>\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default RecapInfo;\n","import React from 'react';\nimport spotifyService from \"../services/SpotifyService\";\nimport { LoadingMessage } from './Home';\nimport RecapInfo from './RecapInfo';\n\nconst queryString = require('query-string');\n\nconst initialState = {\n    status: \"loading\",\n    accessToken: undefined,\n    refreshToken: undefined,\n    expiresIn: undefined,\n    startTimeMs: undefined,\n    \n};\n\nclass RecapContainer extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = initialState;\n\n        this.refreshPlayer = this.refreshPlayer.bind(this);\n    }\n\n    componentDidMount() {\n        // logic: detect current playback, fetch lyrics for song, display info to page\n        // extra: use song features for more specific rendering (background? font? color?)\n        const {accessToken, refreshToken, expiresIn, startTimeMs} = queryString.parse(this.props.location.search);\n\n        if (accessToken) {\n            this.setState(prevState => ({...prevState, accessToken, refreshToken, expiresIn, startTimeMs}));\n            if (((Date.now() - startTimeMs) / 1000) >= expiresIn) {\n                this.refreshPlayer(refreshToken);\n            } else {\n                console.log(accessToken)\n                this.getTopItems(accessToken);\n            }\n        } else {\n            this.setState({status: \"error\", message: \"The player failed to load for an unknown reason. Please refresh the page, or redirect to the home page to restart the authorization flow.\"})\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {accessToken, refreshToken, expiresIn, startTimeMs} = queryString.parse(this.props.location.search);\n        if (startTimeMs && startTimeMs !== prevState.startTimeMs) this.setState(prevState => ({...prevState, accessToken, refreshToken, expiresIn, startTimeMs}));\n    }\n\n\n    refreshPlayer() {\n        // reset background style\n        if (document.body.style.backdropFilter === 'blur(5px)') {\n            document.body.style.backgroundImage = '';\n            document.body.style.backdropFilter = '';\n            document.body.classList.add('bg-white');\n        }\n        this.setState(prevState => ({...prevState, status: \"loading\"}));\n        const timeSinceStart = (Date.now() - this.state.startTimeMs) / 1000;\n        const timeLeft = Math.ceil(this.state.expiresIn - timeSinceStart);\n        console.log(`Time left: ${Math.floor(timeLeft / 60)}m ${timeLeft % 60}s | Expired: ${timeLeft <= 0}`);\n        if (timeLeft <= 0) {\n            this.refreshToken(this.state.spotifyRefreshToken);\n        } else {\n            \n        }\n    }\n\n    refreshToken(refresh_token) {\n        spotifyService.refreshTokens(refresh_token)\n            .then(data => {\n                if (data.success) {\n                    const spotifyAccessToken = data.accessToken;\n                    const spotifyExpiresIn = data.expiresIn;\n                    this.setState(prevState => ({...prevState, spotifyAccessToken, spotifyExpiresIn}));\n                    this.props.history.push(`/player?spotifyAccessToken=${spotifyAccessToken}&spotifyRefreshToken=${this.state.spotifyRefreshToken}&spotifyExpiresIn=${spotifyExpiresIn}&startTimeMs=${Date.now()}`)\n                    this.findCurrentSong(spotifyAccessToken);\n                } else {\n                    this.setState({status: \"error\", message: `The recapper failed to load: ${data.errorMessage || \"idk why\"}. Please refresh the page, or redirect to the home page to restart the authorization flow.`})\n                }\n            }).catch(e => {this.setState({status: \"error\", message: \"The player failed to load for an unknown reason. Please refresh the page, or redirect to the home page to restart the authorization flow.\"})})\n    }\n\n    getTopItems(accessToken, type=\"artists\", timespan=\"medium_term\") {\n        spotifyService.getTopItems(accessToken, type, timespan)\n            .then(data => {\n                if (data.success) {\n                    this.setState(prevState => ({...prevState, status: \"success\", items: data.items}));\n                } else {\n                    this.setState({status: \"error\", message: `The recapper failed to load: ${data.errorMessage || \"idk why\"}. Please refresh the page, or redirect to the home page to restart the authorization flow.`})\n                }\n            })\n        \n    }\n\n    render() {\n        return (\n            <div className=\"container mx-auto text-center my-3 text-josephin\">\n                {\n                    this.state.status === \"loading\" && <div><div style={{height: \"30vh\"}} />{LoadingMessage(\"Collecting your listening history...\", \"#15d61c\", \"text-white\")}</div>\n                }\n                {\n                    this.state.status === \"success\" && <RecapInfo items={this.state.items} type=\"artists\" />\n                }\n                {\n                    this.state.status === \"error\" &&\n                    <span>\n                        <p className=\"mb-3 mx-2 text-white\">There was an issue collecting data{this.state.message && `: ${this.state.message}`}. Please login again through the home page.</p>\n                        <div className=\"flex\">\n                            <a href=\"/\" className=\"rounded bg-spotify-green text-white p-3 mx-auto\">Home page</a>\n                        </div>\n                    </span>\n                }\n            </div>\n        )\n    }\n}\n\nexport default RecapContainer;\n","import React from 'react';\n//import { Link } from 'react-router-dom';\nimport {LoadingMessage} from \"./Home\";\nimport spotifyService from '../services/SpotifyService';\n\nconst queryString = require('query-string');\n\n\nclass SpotifyCallback extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {status: \"loading\", error: undefined, local: undefined};\n    }\n\n    componentDidMount() {\n        // spotify redirects to /callback?code=... or /callback?error=...\n        const {code, error} = queryString.parse(this.props.location.search);\n        if (code) {\n            setTimeout(() => this.getTokens(code), 1000);\n        } else if (error) {\n            this.setState({status: \"error\", error: error});\n        }\n    }\n\n    getTokens(spotifyCode) {\n        const local = window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\" || window.location.hostname === \"\";\n        spotifyService.getTokens(spotifyCode, local).then(data => {\n            if (data.success) {\n                this.setState({status: \"success\", spotifyAccessToken: data.accessToken, spotifyRefreshToken: data.refreshToken, spotifyExpiresIn: data.expiresIn, local});\n            } else {\n                this.setState({status: \"error\", message: data.errorMessage});\n            }\n        }).catch(e => {\n            this.setState({status: \"error\", message: e});\n        });\n    }\n\n\n    render() {\n        return (\n            <div className=\"container mx-auto my-3 text-center text-josephin\">\n                <div style={{height: \"30vh\"}} />\n                {\n                    this.state.status === \"loading\" && LoadingMessage(\"Logging you in...\", \"#15d61c\", \"text-white\")\n                }\n                {\n                    this.state.status === \"success\" &&\n                    <div className=\"\">\n                        <a href={`/#/recap?accessToken=${this.state.spotifyAccessToken}&refreshToken=${this.state.spotifyRefreshToken}&expiresIn=${this.state.spotifyExpiresIn}&startTimeMs=${Date.now()}`}\n                              className=\"rounded-lg p-4 bg-spotify-green text-xl text-josephin text-white mx-auto\">Continue to Recap</a>\n                              \n                    </div>\n                }\n                {\n                    this.state.status === \"error\" &&\n                    <span>\n                        <p className=\"mb-3 mx-2 text-white\">There was an issue logging in{this.state.message && `: ${this.state.message}`}. Please login again through the home page.</p>\n                        <div className=\"flex\">\n                            <a href=\"/\" className=\"rounded bg-spotify-green text-white p-3 mx-auto\">Home page</a>\n                        </div>\n                    </span>\n                }\n                <div style={{height: \"50vh\"}} />\n            </div>\n        );\n    }\n}\n\nexport default SpotifyCallback;\n","import React from \"react\";\n//import queryString from \"querystring\";\nimport { Redirect } from \"react-router-dom\";\n\n//const buttonClass = \"rounded-lg bg-spotify-green text-josephin text-lg text-white p-4\";\nclass FallbackHandler extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {spotifyCallback: false, code: null};\n    }\n    componentDidMount() {\n        console.log(window.location);\n        if (window.location.hash.includes('spotifycallback')) {\n            this.setState({spotifyCallback: true, query: window.location.search});\n        } /*else if (window.location.hash.includes('#/access_token')) {\n            const {access_token, state} = queryString.parse(window.location.hash.substring(2));\n            //const access_token = window.location.hash.substring(2).split('&')[0].substring(13) || '';\n            console.log(`${access_token}, ${state}`);\n            //this.props.history.push(`${window.location.hash.substring(1)}`);\n            this.setState({geniusCallback: true, access_token, state});\n        }*/\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n    }\n\n    render() {\n        return (\n            <div className=\"text-center\">\n                <div style={{height: \"30vh\"}} />\n                {//this.state.spotifyCallback && <Link to={`/callback${window.location.search}`} className={buttonClass}>Confirm Spotify Authorization</Link>\n                }\n                { this.state.spotifyCallback && <Redirect to={`/callback${this.state.query}`} /> }\n                <div style={{height: \"70vh\"}} />\n            </div>\n        )\n    }\n}\n\nexport default FallbackHandler;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {HashRouter as Router, Switch, Route} from 'react-router-dom';\nimport './index.css';\nimport Home from \"./components/Home\";\nimport RecapContainer from \"./components/Recapper\";\nimport SpotifyCallback from \"./components/SpotifyCallback\";\nimport FallbackHandler from \"./components/FallbackHandler\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <div className=\"\">\n          <Router>\n              <div className=\"flex flex-row\">\n                  <a href='/'><p className=\"text-white m-3\">Home</p></a>\n              </div>\n              <Switch>\n                  <Route exact path=\"/\" component={Home} />\n                  <Route path=\"/callback\" component={SpotifyCallback} />\n                  <Route path=\"/recap\" component={RecapContainer} />\n                  <Route component={FallbackHandler} />\n              </Switch>\n          </Router>\n      </div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals();\n"],"sourceRoot":""}